---
import MainLayout from "@/layouts/MainLayout.astro";
import { getEntry } from "astro:content";

const { lang, slug } = Astro.params;
const page = await getEntry("blog", `${lang}/${slug}`);

if (!page) {
    return Astro.redirect("/404");
}

const formattedDate = page.data.date.toLocaleString(lang);
const { Content, headings } = await page.render();
---

<MainLayout>
    <section class="blog">

        <h1>Tabla de contenidos</h1>
    
        <ol>
            {
                headings.map((heading, index) => (
                    <li>
                        <a href={`#${heading.slug}`}>
                            {index + 1} - {heading.text}
                        </a>
                    </li>
                ))
            }
        </ol>
    
        <!-- Blog Content -->
    
        <Content />
    </section>


</MainLayout>
